import{l as Y,j as s,k as se,g as L,C as le}from"./index-BAi2JHJ6.js";const ie=e=>{const t=Y.c(11);let i;t[0]!==e.name?(i=s.jsx("h1",{children:e.name}),t[0]=e.name,t[1]=i):i=t[1];let f;t[2]!==e.description?(f=s.jsx("p",{children:e.description}),t[2]=e.description,t[3]=f):f=t[3];const a=e.image?e.image:"hhtps//picsum.photos/200";let r;t[4]!==e.name||t[5]!==a?(r=s.jsx("img",{src:a,alt:e.name}),t[4]=e.name,t[5]=a,t[6]=r):r=t[6];let l;return t[7]!==i||t[8]!==f||t[9]!==r?(l=s.jsxs("div",{className:"pizza",children:[i,f,r]}),t[7]=i,t[8]=f,t[9]=r,t[10]=l):l=t[10],l},ae=new Intl.NumberFormat("en-us",{style:"currency",currency:"usd"});function ne(e){const t=Y.c(15),{cart:i,checkout:f}=e;let a=0;for(let p=0;p<i.length;p++){const x=i[p];a=a+x.pizza.sizes[x.size]}let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("h2",{children:"Cart"}),t[0]=r):r=t[0];let l;t[1]!==i?(l=i.map(ce),t[1]=i,t[2]=l):l=t[2];let h;t[3]!==l?(h=s.jsx("ul",{children:l}),t[3]=l,t[4]=h):h=t[4];let n;t[5]!==a?(n=ae.format(a),t[5]=a,t[6]=n):n=t[6];let o;t[7]!==n?(o=s.jsxs("p",{children:["Total: ",n]}),t[7]=n,t[8]=o):o=t[8];let m;t[9]!==f?(m=s.jsx("button",{onClick:f,children:"Checkout"}),t[9]=f,t[10]=m):m=t[10];let u;return t[11]!==h||t[12]!==o||t[13]!==m?(u=s.jsxs("div",{className:"cart",children:[r,h,o,m]}),t[11]=h,t[12]=o,t[13]=m,t[14]=u):u=t[14],u}function ce(e,t){return s.jsxs("li",{children:[s.jsxs("span",{className:"size",children:[e.size," "]})," -",s.jsxs("span",{className:"type",children:[e.pizza.name," "]})," -",s.jsxs("span",{className:"price",children:[e.price," "]})]},t)}const fe=se("/order")({component:oe}),re=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function oe(){const e=Y.c(71);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0];const[i,f]=L.useState(t),[a,r]=L.useState("pepperoni"),[l,h]=L.useState("M"),[n,o]=L.useContext(le),[m,u]=L.useState(!0);let p;e[1]!==n||e[2]!==o?(p=async function(){await fetch("/api/order",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:n})}),o([]),u(!1)},e[1]=n,e[2]=o,e[3]=p):p=e[3];const x=p;let z,d;if(e[4]!==m||e[5]!==l||e[6]!==a||e[7]!==i){if(!m){let c;e[10]!==a?(c=Z=>a===Z.id,e[10]=a,e[11]=c):c=e[11],d=i.find(c),z=re.format(d.sizes[l])}e[4]=m,e[5]=l,e[6]=a,e[7]=i,e[8]=z,e[9]=d}else z=e[8],d=e[9];let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=async function(){const te=await(await fetch("/api/pizzas")).json();f(te),u(!1)},e[12]=R):R=e[12];const ee=R;let w;e[13]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{ee()},e[13]=w):w=e[13];let $;e[14]!==l?($=[l],e[14]=l,e[15]=$):$=e[15],L.useEffect(w,$);let E;e[16]!==n||e[17]!==l||e[18]!==z||e[19]!==d||e[20]!==o?(E=function(){o([...n,{pizza:d,size:l,price:z}])},e[16]=n,e[17]=l,e[18]=z,e[19]=d,e[20]=o,e[21]=E):E=e[21];const Q=E;let M;e[22]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("h2",{children:"Create Order "}),e[22]=M):M=e[22];let O,I;e[23]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("label",{htmlFor:"pizza-type"}),I=c=>r(c.target.value),e[23]=O,e[24]=I):(O=e[23],I=e[24]);let j;e[25]!==i?(j=i.map(me),e[25]=i,e[26]=j):j=e[26];let y;e[27]!==a||e[28]!==j?(y=s.jsxs("div",{children:[O,s.jsx("select",{onChange:I,name:"pizza-type",value:a,children:j})]}),e[27]=a,e[28]=j,e[29]=y):y=e[29];let A;e[30]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("label",{htmlFor:"pizza-size",children:" Pizza Size"}),e[30]=A):A=e[30];const V=l==="s";let D;e[31]===Symbol.for("react.memo_cache_sentinel")?(D=c=>h(c.target.value),e[31]=D):D=e[31];let _;e[32]!==V?(_=s.jsx("input",{checked:V,type:"radio",name:"pizza-size",value:"s",id:"pizza-s",onChange:D}),e[32]=V,e[33]=_):_=e[33];let J;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("label",{htmlFor:"pizza-s",children:"Small"}),e[34]=J):J=e[34];let b;e[35]!==_?(b=s.jsxs("span",{children:[_,J]}),e[35]=_,e[36]=b):b=e[36];const W=l==="M";let U;e[37]===Symbol.for("react.memo_cache_sentinel")?(U=c=>h(c.target.value),e[37]=U):U=e[37];let S;e[38]!==W?(S=s.jsx("input",{checked:W,type:"radio",name:"pizza-size",value:"M",id:"pizza-m",onChange:U}),e[38]=W,e[39]=S):S=e[39];let G;e[40]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("label",{htmlFor:"pizza-m",children:"Medium"}),e[40]=G):G=e[40];let g;e[41]!==S?(g=s.jsxs("span",{children:[S,G]}),e[41]=S,e[42]=g):g=e[42];const X=l==="L";let q;e[43]===Symbol.for("react.memo_cache_sentinel")?(q=c=>h(c.target.value),e[43]=q):q=e[43];let v;e[44]!==X?(v=s.jsx("input",{checked:X,type:"radio",name:"pizza-size",value:"L",id:"pizza-l",onChange:q}),e[44]=X,e[45]=v):v=e[45];let B;e[46]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx("label",{htmlFor:"pizza-l",children:"Large"}),e[46]=B):B=e[46];let C;e[47]!==v?(C=s.jsxs("span",{children:[v,B]}),e[47]=v,e[48]=C):C=e[48];let N;e[49]!==b||e[50]!==g||e[51]!==C?(N=s.jsxs("div",{children:[A,s.jsxs("div",{children:[b,g,C]})]}),e[49]=b,e[50]=g,e[51]=C,e[52]=N):N=e[52];let H;e[53]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("button",{type:"submit",children:"Add to Cart"}),e[53]=H):H=e[53];let T;e[54]!==y||e[55]!==N?(T=s.jsxs("div",{children:[y,N,H]}),e[54]=y,e[55]=N,e[56]=T):T=e[56];let k;e[57]!==z||e[58]!==d?(k=d?s.jsxs("div",{className:"order-pizza",children:[s.jsx(ie,{name:d.name,description:d.description,image:d.image}),s.jsx("p",{children:z})]}):s.jsx("h1",{children:'"loading pizza lol"'}),e[57]=z,e[58]=d,e[59]=k):k=e[59];let F;e[60]!==Q||e[61]!==T||e[62]!==k?(F=s.jsxs("div",{className:"order",children:[M,s.jsxs("form",{action:Q,children:[T,k]})]}),e[60]=Q,e[61]=T,e[62]=k,e[63]=F):F=e[63];let P;e[64]!==n||e[65]!==x||e[66]!==m?(P=m?s.jsx("h2",{children:" LOADING...."}):s.jsx(ne,{checkout:x,cart:n}),e[64]=n,e[65]=x,e[66]=m,e[67]=P):P=e[67];let K;return e[68]!==F||e[69]!==P?(K=s.jsxs("div",{className:"order-page",children:[F,P]}),e[68]=F,e[69]=P,e[70]=K):K=e[70],K}function me(e){return s.jsx("option",{value:e.id,children:e.name},e.id)}export{fe as Route};
