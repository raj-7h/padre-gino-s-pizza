var M=e=>{throw TypeError(e)};var j=(e,t,s)=>t.has(e)||M("Cannot "+s);var n=(e,t,s)=>(j(e,t,"read from private field"),s?s.call(e):t.get(e)),b=(e,t,s)=>t.has(e)?M("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),f=(e,t,s,i)=>(j(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),y=(e,t,s)=>(j(e,t,"access private method"),s);import{S as N,s as z,m as w,o as F,e as _,u as L,g as x,k as T,l as K,j as a,h as U}from"./index-BAi2JHJ6.js";import{n as q,s as I}from"./utils-km2FGkQ4.js";var l,m,r,u,c,v,C,k,P=(k=class extends N{constructor(t,s){super();b(this,c);b(this,l);b(this,m);b(this,r);b(this,u);f(this,l,t),this.setOptions(s),this.bindMethods(),y(this,c,v).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=n(this,l).defaultMutationOptions(t),z(this.options,s)||n(this,l).getMutationCache().notify({type:"observerOptionsUpdated",mutation:n(this,r),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&w(s.mutationKey)!==w(this.options.mutationKey)?this.reset():((i=n(this,r))==null?void 0:i.state.status)==="pending"&&n(this,r).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=n(this,r))==null||t.removeObserver(this)}onMutationUpdate(t){y(this,c,v).call(this),y(this,c,C).call(this,t)}getCurrentResult(){return n(this,m)}reset(){var t;(t=n(this,r))==null||t.removeObserver(this),f(this,r,void 0),y(this,c,v).call(this),y(this,c,C).call(this)}mutate(t,s){var i;return f(this,u,s),(i=n(this,r))==null||i.removeObserver(this),f(this,r,n(this,l).getMutationCache().build(n(this,l),this.options)),n(this,r).addObserver(this),n(this,r).execute(t)}},l=new WeakMap,m=new WeakMap,r=new WeakMap,u=new WeakMap,c=new WeakSet,v=function(){var s;const t=((s=n(this,r))==null?void 0:s.state)??F();f(this,m,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},C=function(t){_.batch(()=>{var s,i,o,h,d,S,E,O;if(n(this,u)&&this.hasListeners()){const p=n(this,m).variables,g=n(this,m).context;(t==null?void 0:t.type)==="success"?((i=(s=n(this,u)).onSuccess)==null||i.call(s,t.data,p,g),(h=(o=n(this,u)).onSettled)==null||h.call(o,t.data,null,p,g)):(t==null?void 0:t.type)==="error"&&((S=(d=n(this,u)).onError)==null||S.call(d,t.error,p,g),(O=(E=n(this,u)).onSettled)==null||O.call(E,void 0,t.error,p,g))}this.listeners.forEach(p=>{p(n(this,m))})})},k);function $(e,t){const s=L(),[i]=x.useState(()=>new P(s,e));x.useEffect(()=>{i.setOptions(e)},[i,e]);const o=x.useSyncExternalStore(x.useCallback(d=>i.subscribe(_.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),h=x.useCallback((d,S)=>{i.mutate(d,S).catch(q)},[i]);if(o.error&&I(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:h,mutateAsync:o.mutate}}async function A(e,t,s){const i=await fetch("https://pizza-backend-xpbk.onrender.com/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,message:s})});if(!i.ok)throw new Error("Network response was not ok. Send help.");return i.json()}const H=T("/contact")({component:J});function J(){const e=K.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={mutationFn:Q},e[0]=t):t=e[0];const s=$(t);if(s.isError){let h;return e[1]===Symbol.for("react.memo_cache_sentinel")?(h=a.jsx("h1",{children:"lol no"}),e[1]=h):h=e[1],h}let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx("h2",{children:"Contact"}),e[2]=i):i=e[2];let o;return e[3]!==s.isSuccess||e[4]!==s.mutate?(o=a.jsxs("div",{className:"contact",children:[i,s.isSuccess?a.jsx("h3",{children:"Submitted!"}):a.jsxs("form",{action:s.mutate,children:[a.jsx(R,{name:"name",placeholder:"Name"}),a.jsx(R,{name:"email",placeholder:"Email",type:"email"}),a.jsx("textarea",{name:"message",placeholder:"Message"}),a.jsx("button",{children:"Submit"})]})]}),e[3]=s.isSuccess,e[4]=s.mutate,e[5]=o):o=e[5],o}function Q(e){return A(e.get("name"),e.get("email"),e.get("message"))}function R(e){const t=K.c(5),{pending:s}=U.useFormState();let i;return t[0]!==s||t[1]!==e.name||t[2]!==e.placeholder||t[3]!==e.type?(i=a.jsx("input",{disabled:s,name:e.name,type:e.type,placeholder:e.placeholder}),t[0]=s,t[1]=e.name,t[2]=e.placeholder,t[3]=e.type,t[4]=i):i=t[4],i}export{H as Route};
